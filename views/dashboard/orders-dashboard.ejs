<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Orders</title>
    <link rel="stylesheet" href="/Css/dashboard.css" />
</head>

<body>
    <script src="orders.js"></script>
    <div class="sidebar">
        <h2>Velora</h2>
        <hr>
        <ul>
            <a href="/admin-dashboard/dashboard"><li>Dashboard</li></a>
            <a href="/customers-dashboard"><li>Customers</li></a>
            <a href="/orders-dashboard"><li>Orders</li></a>
            <a href="/product-dashboard"><li>Products</li></a>
        </ul>
    </div>

    <div class="main">
        <div class="top">
            <h1>Orders</h1>
        </div>

        <div class="search-container">
            <input type="text" id="search" placeholder="Search orders...">
            <select id="status-filter">
                <option value="">All Status</option>
                <option value="pending">Pending</option>
                <option value="shipped">Shipped</option>
                <option value="delivered">Delivered</option>
            </select>
        </div>

        <div class="orders-container">
            <h2>Recent Orders</h2>
            <table class="orders-table">
                <thead>
                    <tr>
                        <th>Order ID</th>
                        <th>Customer</th>
                        <th>Products</th>
                        <th>Date</th>
                        <th>Amount</th>
                        <th>Status</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    <% if (orders && orders.length > 0) { %>
                        <% orders.forEach(function(order) { %>
                            <tr>
                                <td><%= order.orderId %></td>
                                <td>
                                    <% if (order.user && order.user.name) { %>
                                        <%= order.user.name %>
                                    <% } else { %>
                                        Unknown
                                    <% } %>
                                </td>
                                <td>
                                    <% if (order.product_ids && order.product_ids.length > 0) { %>
                                        <% order.product_ids.forEach(function(product, index) { %>
                                            <%= product.name %><% if (index < order.product_ids.length - 1) { %>, <% } %>
                                        <% }); %>
                                    <% } else { %>
                                        No products
                                    <% } %>
                                </td>
                                <td><%= order.orderDate.toDateString() %></td>
                                <td>$<%= order.total_price.toFixed(2) %></td>
                                <td><span class="status-<%= order.status.toLowerCase() %>"><%= order.status %></span></td>
                                <td><span class="delete" onclick="deleteRow(this)">Delete</span></td>
                            </tr>
                        <% }); %>
                    <% } else { %>
                        <tr>
                            <td colspan="7">No orders found.</td>
                        </tr>
                    <% } %>
                </tbody>
            </table>
        </div>
    </div>

    <script src="/javasScript/orderManagment.js"></script>
</body>

</html>
